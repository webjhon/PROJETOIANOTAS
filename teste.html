<!DOCTYPE html>
<html>
<head>
    <title>Cube Magic</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        #canvas {
            position: relative;
            width: 100%;
            height: 500px;
            border: 1px solid #000;
        }
        .cube, .circle {
            position: absolute;
            width: 100px;
            height: 100px;
            background-color: #f00;
            cursor: pointer;
            border-radius: 50%;
            transition: transform 0.3s;
        }
        .cube:hover, .circle:hover {
            transform: scale(1.4);
        }
        .cube.active, .circle.active {
            transform: scale(1.1);
        }

        .cube.active .note, .circle.active .note {
            display: block;

        }
    </style>
</head>
<body>
    <div id="canvas">
        <div class="cube" id="cube1">
            <div class="note"></div>
        </div>
        <div class="cube" id="cube2">
            <div class="note"></div>
        </div>
        <div class="cube" id="cube3">
            <div class="note"></div>
        </div>
        <div class="cube" id="cube4">
            <div class="note"></div>
        </div>
        <div class="cube" id="cube5">
            <div class="note"></div>
        </div>
        <div class="cube" id="cube6">
            <div class="note"></div>
        </div>
        <div class="cube" id="cube7">
            <div class="note"></div>
        </div>
        <div class="cube" id="cube8">
            <div class="note"></div>
        </div>
        <div class="cube" id="cube9">
            <div class="note"></div>
        </div>
        <div class="cube" id="cube10">
            <div class="note"></div>
        </div>
        <div class="cube" id="cube11">
            <div class="note"></div>
        </div>
        <div class="cube" id="cube12">
            <div class="note"></div>
        </div>
        <div class="cube" id="cube13">
            <div class="note"></div>
        </div>
        <div class="cube" id="cube14">
            <div class="note"></div>
        </div>
        <div class="cube" id="cube15">
            <div class="note"></div>
        </div>
        <div class="cube red" id="cube16">
            <div class="note"></div>
        </div>
        <div class="cube red" id="cube17">
            <div class="note"></div>
        </div>
        <div class="cube red" id="cube18">
            <div class="note"></div>
        </div>
        <div class="cube red" id="cube19">
            <div class="note"></div>
        </div>
        <div class="cube red" id="cube20">
            <div class="note"></div>
        </div>
        <div class="cube red" id="cube21">
            <div class="note"></div>
        </div>
        <div class="cube red" id="cube22">
            <div class="note"></div>
        </div>
        <div class="cube red" id="cube23">
            <div class="note"></div>
        </div>
        <div class="cube red" id="cube24">
            <div class="note"></div>
        </div>
        <div class="cube red" id="cube25">
            <div class="note"></div>
        </div>
        <div class="circle" id="circle1">
            <div class="note"></div>
        </div>
        <div class="circle" id="circle2">
            <div class="note"></div>
        </div>
        <div class="circle" id="circle3">
            <div class="note"></div>
        </div>
        <div class="circle" id="circle4">
            <div class="note"></div>
        </div>
        <div class="circle" id="circle5">
            <div class="note"></div>
        </div>
        <div class="circle" id="circle6">
            <div class="note"></div>
        </div>
        <div class="circle" id="circle7">
            <div class="note"></div>
        </div>
        <div class="circle" id="circle8">
            <div class="note"></div>
        </div>
        <div class="circle" id="circle9">
            <div class="note"></div>
        </div>
        <div class="circle" id="circle10">
            <div class="note"></div>
        </div>
        <div class="circle" id="circle11">
            <div class="note"></div>
        </div>
        <div class="circle" id="circle12">
            <div class="note"></div>
        </div>
        <div class="circle" id="circle13">
            <div class="note"></div>
        </div>
        <div class="circle" id="circle14">
            <div class="note"></div>
        </div>
        <div class="circle" id="circle15">
            <div class="note"></div>
        </div>
        <div class="circle red" id="circle16">
            <div class="note"></div>
        </div>
        <div class="circle red" id="circle17">
            <div class="note"></div>
        </div>
        <div class="circle red" id="circle18">
            <div class="note"></div>
        </div>
        <div class="circle red" id="circle19">
            <div class="note"></div>
        </div>
        <div class="circle red" id="circle20">
            <div class="note"></div>
        </div>
        <div class="circle red" id="circle21">
            <div class="note"></div>
        </div>
        <div class="circle red" id="circle22">
            <div class="note"></div>
        </div>
        <div class="circle red" id="circle23">
            <div class="note"></div>
        </div>
        <div class="circle red" id="circle24">
            <div class="note"></div>
        </div>
        <div class="circle red" id="circle25">
            <div class="note"></div>
        </div>
    </div>

    <div class="popup" id="popup">
        <p id="position"></p>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        var cubes = document.getElementsByClassName('cube');
        var circles = document.getElementsByClassName('circle');
        var popup = document.getElementById('popup');

        for (var i = 0; i < cubes.length; i++) {
            cubes[i].addEventListener('click', function() {
                var note = this.querySelector('.note');
                note.contentEditable = true;
                note.focus();
                this.classList.add('active');
            });
        }

        for (var i = 0; i < circles.length; i++) {
            circles[i].addEventListener('click', function() {
                var note = this.querySelector('.note');
                note.contentEditable = true;
                note.focus();
                this.classList.add('active');
            });
        }
    </script>
    <script>
        var position = document.getElementById('position');

        for (var i = 0; i < cubes.length; i++) {
            cubes[i].addEventListener('mousedown', function(e) {
                var cube = e.target;
                var offsetX = e.clientX - cube.offsetLeft;
                var offsetY = e.clientY - cube.offsetTop;

                document.addEventListener('mousemove', moveCube);

                function moveCube(e) {
                    var x = e.clientX - offsetX;
                    var y = e.clientY - offsetY;

                    // Check collision with canvas boundaries
                    var canvas = document.getElementById('canvas');
                    var canvasRect = canvas.getBoundingClientRect();
                    var cubeRect = cube.getBoundingClientRect();

                    if (x < canvasRect.left) {
                        x = canvasRect.left;
                    } else if (x + cubeRect.width > canvasRect.right) {
                        x = canvasRect.right - cubeRect.width;
                    }

                    if (y < canvasRect.top) {
                        y = canvasRect.top;
                    } else if (y + cubeRect.height > canvasRect.bottom) {
                        y = canvasRect.bottom - cubeRect.height;
                    }

                    cube.style.left = x + 'px';
                    cube.style.top = y + 'px';
                }

                document.addEventListener('mouseup', function() {
                    document.removeEventListener('mousemove', moveCube);
                });
            });

            cubes[i].addEventListener('click', function(e) {
                var cube = e.target;
                var randomColor = getRandomColor();
                cube.style.backgroundColor = randomColor;
            });
        }

        for (var i = 0; i < circles.length; i++) {
            circles[i].addEventListener('mousedown', function(e) {
                var circle = e.target;
                var offsetX = e.clientX - circle.offsetLeft;
                var offsetY = e.clientY - circle.offsetTop;

                document.addEventListener('mousemove', moveCircle);

                function moveCircle(e) {
                    var x = e.clientX - offsetX;
                    var y = e.clientY - offsetY;

                    // Check collision with canvas boundaries
                    var canvas = document.getElementById('canvas');
                    var canvasRect = canvas.getBoundingClientRect();
                    var circleRect = circle.getBoundingClientRect();

                    if (x < canvasRect.left) {
                        x = canvasRect.left;
                    } else if (x + circleRect.width > canvasRect.right) {
                        x = canvasRect.right - circleRect.width;
                    }

                    if (y < canvasRect.top) {
                        y = canvasRect.top;
                    } else if (y + circleRect.height > canvasRect.bottom) {
                        y = canvasRect.bottom - circleRect.height;
                    }

                    circle.style.left = x + 'px';
                    circle.style.top = y + 'px';
                }

                document.addEventListener('mouseup', function() {
                    document.removeEventListener('mousemove', moveCircle);
                });
            });

            circles[i].addEventListener('click', function(e) {
                var circle = e.target;
                var randomColor = getRandomColor();
                circle.style.backgroundColor = randomColor;
            });
        }

        function getRandomColor() {
            var r = Math.floor(Math.random() * 256);
            var g = Math.floor(Math.random() * 256);
            var b = Math.floor(Math.random() * 256);
            return 'rgb(' + r + ', ' + g + ', ' + b + ')';
        }
    </script>
</body>
</html>

